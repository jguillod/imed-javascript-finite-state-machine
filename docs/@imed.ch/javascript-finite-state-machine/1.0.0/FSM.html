<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>FSM - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/jfg-jsdoc.css">

    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="FSM.html">FSM</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#availActions">availActions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#availEvents">availEvents</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#can">can</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#current">current</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#e%255Bevent%255D">e[event]</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#engineVersion">engineVersion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#factory">factory</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#history">history</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#is">is</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#isInTransition">isInTransition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#isLocked">isLocked</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#lock">lock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#on">on</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#original">original</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#recoverPendingTransition">recoverPendingTransition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#resetMachine">resetMachine</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#status">status</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#t">t</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#testLock">testLock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#trigger">trigger</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#un">un</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#unlock">unlock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FSM.html#version">version</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">FSM</h1>
    

    




<section>

<header>
    
        <h2>
        FSM
        </h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
<div class="section-method">

    

    <h4 class="name" id="FSM"><span class="type-signature"></span>new FSM<span class="signature">(config, callback<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Instanciate a finite state machine.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line109">line 109</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The data definition machine.</p>
                
                    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>_</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>All properties of _ are copied to <code>this._private</code> but usually you will have the following metadata:</p>
                
                    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>version</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                <p>Your version of this machine.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>namespace</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                <p>Your namespace of the definition.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>initial</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    "none"
                
                </td>
            

            <td class="description last">
                <p>The initial state name of the machine. This set the current state of this machine on instanciation.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>justListen</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last">
                <p>Set it to <code>false</code> if you need that listeners registred with <a href="FSM.html#on"><code>FSM#on</code></a> should behave like configuration handlers (before, guard, exit, do, dont, entry, after). See explanation on rules and <code>justListen</code> in Home doc or README file.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>debug</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">
                <p>Display verbose messages in console if <code>true</code>.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>

                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>"state"</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The property name is the name of a state (a string identifier). It is any other configs property containing one or both of <code>entry</code> or <code>exit</code> properties.</p>
                
                    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>entry</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~listener">FSM~listener</a></code></span>
|

<span class="param-type"><code>Array</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The entry <code>function(eventObj, arg...)</code> or array of.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>exit</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~listener">FSM~listener</a></code></span>
|

<span class="param-type"><code>Array</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The exit <code>function(eventObj, arg...)</code> or array of.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>actions</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>An object containing the actions for this state (e.b. actions:{ flip: function(a, b){...} }).</p>
                
            </td>
        </tr>

    
    </tbody>
</table>

                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>"event"</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array</code></span>
|

<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The property name is the name of an event (a string identifier) of a trigger event (its name). It is any other configs properties whose value is either an array of Transitions Object or a single Transition Object. Transition Object can contain the following set of properties :</p>
                
                    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>from</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The mandatory source state name (string), i.e. the one which was exited on successfully completed transition.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>to</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The target state name, i.e. the one which was entered and became the new current state on successfully completed transition. Omit this property (i.e. <code>undefined</code>) to define an <strong>internal transition</strong>.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>before</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~listener">FSM~listener</a></code></span>
|

<span class="param-type"><code>Array</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>A [array of] <code>function(eventObj, arg...)</code> to be executed before the transition. If one does not return true the transition is cancelled.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>after</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~listener">FSM~listener</a></code></span>
|

<span class="param-type"><code>Array</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>A [array of] <code>function(eventObj, arg...)</code> executed at the end of the trigger (even if guard failed or error occurred).</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>guard</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~listener">FSM~listener</a></code></span>
|

<span class="param-type"><code>Array</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>A [array of] <code>function(eventObj, arg...)</code> if one does not return true, the transition does not occur.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>do</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~listener">FSM~listener</a></code></span>
|

<span class="param-type"><code>Array</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>A [array of] <code>function(eventObj, arg...)</code> executed after guard succeed.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dont</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~listener">FSM~listener</a></code></span>
|

<span class="param-type"><code>Array</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>A [array of] <code>function(eventObj, arg...)</code> executed after a guard does not return true.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>An optional object to pass in <code>eventObj.options</code> when calling <a href="FSM.html#~listener"><code>FSM~listener</code></a> of each before, after, guard, do and dont of this transition. This options is not passed to the machine events listeners.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>

                
            </td>
        </tr>

    
    </tbody>
</table>

                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~onCreated">FSM~onCreated</a></code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>An optional function to be called when machine is ready.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>












<div class="section-throws">
<h5>Throws:</h5>

        

    <div class="param-desc">
    
        <p>&quot;Unknown initial state name&quot;.</p>
    
    </div>


    
</div>





<div class="section-examples">
<h5>Example</h5>

    <pre class="prettyprint"><code>var config = {
    _: {
        debug: true,
        version: '0.1',
        initial: 'none',
        namespace: 'ch.imed.fsm.demo-test2'
    },

    // STATES:
    red: {
        exit: function(eventObj, args) {
            console.log('ðŸš· clear-exit-red-to-green', arguments);
            return Math.round(new Date() / 1000) % 2;
        },
        actions: {
            hello: function(msg) {
                alert("Hello from machine action!")
            }
        }
    },

    // EVENTS:
    start: {
        from: 'none',
        to: 'green'
    },
    warn: {
        from: 'green',
        to: 'yellow'
    },
    panic: [{
        from: 'green',
        to: 'red'
    }, {
        from: 'yellow',
        to: 'red'
    }, {
        from: 'none',
        to: 'red',
        do: function(eventObj, args) {
            console.log('âž° =======> direct panic !', arguments);
            return true
        }
    }],
    calm: {
        guard: function(eventObj, args) {
            console.log('ðŸš· start-guard', arguments);
            return Math.round(new Date() / 1000) % 2 === 1;
        },
        from: 'red',
        to: 'yellow'
    },
    clear: [{
        from: 'red',
        to: 'green',
        do: [
            function(eventObj, args) {
                console.log('âž° 1. clear-do de red Ã  green', arguments);
                return true
            },
            function(eventObj, args) {
                console.log('âž° 2. clear-do de red Ã  green', arguments);
                return true
            }
        ]
    }, {
        from: 'yellow',
        to: 'green'
    }],
    'internal (green)': {
        from: 'green',
        // to: undefined => it is an internal transition
    },
    'external-on-self (green)': {
        from: 'green',
        to: 'green'
    }
};
var fsm = new FSM(config, function(machine) {
    console.log("The machine is ready on state", machine.current());
});</code></pre>

</div>

</div>
    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<div class="section-members">
<h4 class="name" id="actions"><span class="type-signature"></span>actions<span class="type-signature"> :Object</span></h4>




<div class="description">
    <p>The set of functions available for the current state of this machine.
This set has been defined in the config of <a href="FSM.html"><code>new FSM(config)</code></a> as the <code>actions</code> value of a state definition.</p>
</div>





    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>"name"</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last"><p>Each named property has a function â€“ an action â€“ as its value.</p></td>
        </tr>

        

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line611">line 611</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="FSM.html#availActions"><code>FSM#availActions</code></a> which returns a list of function names.</li>
        </ul>
    </dd>
    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>Object</code></span>


        </li>
    </ul>





    <h5>Example</h5>
    
    <pre class="prettyprint"><code>fsm.send(args);
// fsm.availActions().includes('send') should be true
// i.e. 'send' is in fsm.availActions()</code></pre>


</div>

        
            
<div class="section-members">
<h4 class="name" id="debug"><span class="type-signature"></span>debug<span class="type-signature"> :boolean</span></h4>




<div class="description">
    <p>Setter and getter of the <code>debugging</code> property.<br><code>fsm.debug</code> : get the debug value.<br><code>fsm.debug = true|false</code> : will set the debug value. A value of <code>true</code> will log verbose messages in console.<br>This property is ineffective in the <code>build/fsm-debug.min.js</code> file.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>false</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line1191">line 1191</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>boolean</code></span>


        </li>
    </ul>





</div>

        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            
<div class="section-method">

    

    <h4 class="name" id="availActions"><span class="type-signature"></span>availActions<span class="signature">()</span><span class="type-signature"> &rarr; {Array}</span></h4>

    







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line692">line 692</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="FSM.html#actions"><code>FSM#actions</code></a> which returns an array of action (function) names.</li>
        </ul>
    </dd>
    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Array</code></span>


    </dd>
</dl>


<div class="param-desc">
    <ul>
<li>The array of actions identifiers available for the current state. You can call an action with <code>fsm.actions[action_identifier]</code>.</li>
</ul>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="availEvents"><span class="type-signature"></span>availEvents<span class="signature">(testGuard<span class="signature-attributes">opt</span>, argsâ€¦<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Array}</span></h4>

    







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line703">line 703</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>testGuard</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>If <code>true</code> the guards for each available event if also tested.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>argsâ€¦</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>Optional parameters as in <a href="FSM.html#trigger"><code>FSM#trigger</code></a>. If <code>testGuard !== true</code> these args are ignored.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Array</code></span>


    </dd>
</dl>


<div class="param-desc">
    <ul>
<li>An array of event names available for the current state.</li>
</ul>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="can"><span class="type-signature"></span>can<span class="signature">(event, testGuard<span class="signature-attributes">opt</span>, argsâ€¦<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line724">line 724</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>event</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>Event name to test availability for the current state.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>testGuard</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>If <code>testGuard === true</code> then filter the result by the guard listeners of the available transitions.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>argsâ€¦</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>Optional parameters as in <a href="FSM.html#trigger"><code>FSM#trigger</code></a>. If <code>testGuard !== true</code> these args are ignored.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <ul>
<li><code>true</code> if transition is allowed in current state.</li>
</ul>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="current"><span class="type-signature"></span>current<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Get the current state of this machine.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line492">line 492</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>string</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p>The current state of this machine.</p>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="e%5Bevent%5D"><span class="type-signature"></span>e[event]<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Alias for <a href="FSM.html#trigger"><code>FSM#trigger</code></a>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line268">line 268</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <ul>
<li><code>true</code> if the transition succeed.</li>
<li><code>false</code> if the transition failed. Then the <code>fsm.reason</code> contains the error description.</li>
</ul>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="engineVersion"><span class="type-signature"></span>engineVersion<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Returns the version of FSM Function</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line402">line 402</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>string</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p>The version of FSM Function.</p>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="factory"><span class="type-signature"></span>factory<span class="signature">(initState<span class="signature-attributes">opt</span>, callback<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Factory function based on this machine configuration.
This allows you to instanciate an original machine with a config and then instanciate any number of machines sharing the same config but each with their own lifecycle (history).<br>Registered listeners (<a href="FSM.html#on"><code>FSM#on</code></a>) are not shared but owned by the machine which registred them. Only configuration listeners are shared and unmutable.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line326">line 326</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>initState</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    config._.initial
                
                </td>
            

            <td class="description last">
                <p>The initial state to set to the new machine instance. Default to original configuration value.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~onCreated">FSM~onCreated</a></code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                <p>An optional function to be called when machine is ready.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>












<div class="section-throws">
<h5>Throws:</h5>

        

    <div class="param-desc">
    
        <p>&quot;Unknown initial state name&quot;.</p>
    
    </div>


    
</div>





<div class="section-examples">
<h5>Example</h5>

    <pre class="prettyprint"><code>var fsm = new FSM(config); // original one
var anotherMachine = fsm.factory('start', function(machine){ console.log('machine ready');}); // another machine based on same config as its original
console.log(anotherMachine.orignal() === fsm); // => true</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="history"><span class="type-signature"></span>history<span class="signature">()</span><span class="type-signature"> &rarr; {Array}</span></h4>

    







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line517">line 517</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Array</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p>An array of the transition history of this machine.</p>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is"><span class="type-signature"></span>is<span class="signature">(state)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Test the current state.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line776">line 776</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The state name to test.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <ul>
<li><code>true</code> if the current state of this machine is state.</li>
<li><code>false</code> otherwise.</li>
</ul>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="isInTransition"><span class="type-signature"></span>isInTransition<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Query if this machine is currently in transition.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line866">line 866</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <ul>
<li><code>true</code> if the machine is running a transition yet.</li>
</ul>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="isLocked"><span class="type-signature"></span>isLocked<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Test if FSM#trigger is locked.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line455">line 455</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="FSM.html#lock"><code>lock</code></a> <a href="FSM.html#unlock"><code>unlock</code></a> <a href="FSM.html#testLock"><code>testLock</code></a></li>
        </ul>
    </dd>
    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p><code>true</code> if FSM#trigger is locked.</p>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="lock"><span class="type-signature"></span>lock<span class="signature">(key<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    



<div class="description">
    <p>Lock FSM#trigger.
See topic &quot;Security : Locking Transitions&quot;.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line421">line 421</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="FSM.html#unlock"><code>unlock</code></a> <a href="FSM.html#testLock"><code>testLock</code></a> <a href="FSM.html#isLocked"><code>isLocked</code></a></li>
        </ul>
    </dd>
    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The lock key.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>












<div class="section-throws">
<h5>Throws:</h5>

        

    <div class="param-desc">
    
        <p>&quot;Machine is already locked&quot;</p>
    
    </div>


    
</div>



<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Object</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p><code>key</code> or a new lock key needed to <a href="FSM.html#unlock"><code>unlock</code></a> <a href="FSM.html#trigger"><code>FSM#trigger</code></a>.</p>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="on"><span class="type-signature"></span>on<span class="signature">(eventPattern, scope<span class="signature-attributes">opt</span>, listener, optionsâ€¦)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Add an event listener to this machine.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line646">line 646</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="FSM.html#un"><code>FSM#un</code></a></li>
        </ul>
    </dd>
    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>eventPattern</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>
|

<span class="param-type"><code>RegExp</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                <p>The event emitted by FSM : either the full identifier or a RegExp.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>scope</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    this
                
                </td>
            

            <td class="description last">
                <p>The scope for invoquing the listener (this). Default to this machine.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>listener</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~listener">FSM~listener</a></code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                <p>The listener function(eventObj [, paramsâ€¦]).</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>optionsâ€¦</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                <p>Rest of the arguments to pass as options in the eventObj of listeners.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="original"><span class="type-signature"></span>original<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Return the original machine instanciated with the config. This allow to test if an instance was created with a factory or as an original:</p>
<ul>
<li><code>fsm.original() === fsm</code>                    // =&gt; fsm is an original, i.e. made with new FSM()</li>
<li><code>fsm.factory(state).original() === fsm</code>    // the factory made one has the <code>fsm</code>as origine.</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line238">line 238</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p>The original machine.</p>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="recoverPendingTransition"><span class="type-signature"></span>recoverPendingTransition<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>This is for development to help go out of a _pendingTransition. After calling this method the machine may be in an unexpected state.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line858">line 858</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="resetMachine"><span class="type-signature"></span>resetMachine<span class="signature">(lockKey)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Reset the machine to the initial state as give in initial configs. You need the lock key if machine is locked.
This set the current state to the initial state but do NOT call any listeners. It is up to you to deal with that after calling <code>resetMachine()</code>.
The History is not cleared.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line383">line 383</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>lockKey</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The lock key if machine is locked.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>












<div class="section-throws">
<h5>Throws:</h5>
<ul>
        <li>

    <div class="param-desc">
    
        <p>&quot;Reseting machine is forbidden by a lock&quot;</p>
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        <p>&quot;Reseting machine is forbidden during a transition&quot;</p>
    
    </div>

</li>
    </ul>
</div>





</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="status"><span class="type-signature"></span>status<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="FSM.html#~Status">FSM~Status</a>}</span></h4>

    



<div class="description">
    <p>Get the status of this machine.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line476">line 476</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code><a href="FSM.html#~Status">FSM~Status</a></code></span>


    </dd>
</dl>


<div class="param-desc">
    <p>The current status of this machine.</p>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="t"><span class="type-signature"></span>t<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Alias for <a href="FSM.html#trigger"><code>FSM#trigger</code></a>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line1182">line 1182</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <ul>
<li><code>true</code> if the transition succeed.</li>
<li><code>false</code> if the transition failed. Then the <code>fsm.reason</code> contains the error description.</li>
</ul>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="testLock"><span class="type-signature"></span>testLock<span class="signature">(key)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Test if a key matched the current lock key.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line445">line 445</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="FSM.html#lock"><code>lock</code></a> <a href="FSM.html#unlock"><code>unlock</code></a> <a href="FSM.html#isLocked"><code>isLocked</code></a></li>
        </ul>
    </dd>
    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The lock key.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p><code>true</code> if key matches the current lock key.</p>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="trigger"><span class="type-signature"></span>trigger<span class="signature">(event, lockKey<span class="signature-attributes">opt</span>, argsâ€¦<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Trigger an available event to execute a transition in the current state. You can execute either of:</p>
<pre class="prettyprint source"><code>fsm.trigger(event, [lockKey,] args...)
fsm.t(event, [lockKey,] args...)
fsm.e.&lt;event>([lockKey,] args...)</code></pre><h4>Steps Sequences on a Transition</h4><p>A trigger event initiates a state transition which executes the following actions in the following sequence (and wrapped between <strong>before</strong> and <strong>after</strong>):</p>
<ol>
<li>Evaluate the <strong>guard</strong> condition associated with the transition and perform the following steps only if the guard evaluates to <code>true</code>.</li>
<li><strong>Exit</strong> the source state (the current one).</li>
<li>Execute (or <code>do</code>) the <strong>actions</strong> associated with the transition.</li>
<li><strong>Enter</strong> the target state of the transition.</li>
</ol>
<p>Each transition is a sequence of steps and at each step our machine will fire (emit) an event that listeners can catch.
In our machine there are actually 5 possible sequences of steps for an event depending on context:</p>
<p>(1) <strong>before -&gt; after</strong> :</p>
<blockquote>
<p>if a <em>before listener</em> does not return <code>true</code> or throws an error, the transition is canceled. It behaves like a guard but without executing <code>dont</code> listeners.</p>
</blockquote>
<p>(2) <strong>before -&gt; guard -&gt; dont -&gt; after</strong> :</p>
<blockquote>
<p>if a <em>guard listener</em>  does not return <code>true</code> or throws an error, the transition is canceled and <code>dont</code> listeners are executed.</p>
</blockquote>
<p>(3) <strong>before -&gt; guard -&gt; exit -&gt; after</strong> :</p>
<blockquote>
<p>if a <em>exit state listener</em> returns <code>false</code> or throws an error, the transition is canceled.</p>
</blockquote>
<p>(4) <strong>before -&gt; guard -&gt; exit -&gt; do -&gt; entry -&gt; after</strong> :</p>
<blockquote>
<p>the full external transition.</p>
</blockquote>
<p>(5) <strong>before -&gt; guard -&gt; do -&gt; after</strong> :</p>
<blockquote>
<p>the full internal transition.</p>
</blockquote>
<p>In our implementation <code>before</code> and <code>after</code> listeners are executed when defined at the beginning and the end of the sequence steps.</p>
<p><strong>IMPORTANT</strong> Do not confuse Trigger Events with Machine Events (see detailled home description):</p>
<ul>
<li><strong>Trigger events</strong> are the events defined in the machine configuration (see <a href="FSM.html"><code>FSM</code></a>).</li>
<li><strong>Machine events</strong> are events emitted (fired) by the machine during a transition and that can be listen to when registered with <a href="FSM.html#on"><code>FSM#on</code></a>.</li>
</ul>
<p>The signature of both kind of events is the same: see <a href="FSM.html#~listener"><code>FSM~listener</code></a>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line888">line 888</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><code>FSM#listener</code></li>
        </ul>
    </dd>
    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>event</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The event for the trasnsition.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>lockKey</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The lock key if the machine is locked. If the machine is locked then the second argument must be the lock.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>argsâ€¦</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>any</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>Any number of additional parameters that will be passed to callbacks.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>






<h5>Fires:</h5>
<ul>
    <li>listener: before-"event"-"from"-"to" for instance a transition from a source state "save" to a target state "saving" the event identifier is "before-save-dirty-saving".</li>

    <li>listener: guard-"event"-"from"-"to" for instance: "guard-save-dirty-saving".</li>

    <li>listener: dont-"event"-"from"-"to" for instance: "dont-save-dirty-saving".</li>

    <li>listener: exit-"state" for instance: "exit-dirty".</li>

    <li>listener: do-"event"-"from"-"to" for instance: "do-save-dirty-saving".</li>

    <li>listener: entry-"state" for instance: "entry-saving".</li>

    <li>listener: after-"event"-"from"-"to" for instance: "after-save-dirty-saving".</li>
</ul>









<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <ul>
<li><code>true</code> if the transition succeed.</li>
<li><code>false</code> if the transition failed. Then the <code>fsm.reason</code> contains the error description.</li>
</ul>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="un"><span class="type-signature"></span>un<span class="signature">(eventPattern, scope<span class="signature-attributes">opt</span>, listener)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Remove an event listener from this machine.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line675">line 675</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="FSM.html#on"><code>FSM#on</code></a></li>
        </ul>
    </dd>
    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>eventPattern</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                <p>The event as added with <a href="FSM.html#on"><code>FSM#on</code></a>.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>scope</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    this
                
                </td>
            

            <td class="description last">
                <p>The scope for invoquing the listener (this) as added with <a href="FSM.html#on"><code>FSM#on</code></a>.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>listener</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html#~listener">FSM~listener</a></code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                <p>The listener function(eventObj [, params]) which was added with <a href="FSM.html#on"><code>FSM#on</code></a>.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="unlock"><span class="type-signature"></span>unlock<span class="signature">(key)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Unlock FSM#trigger.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line434">line 434</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="FSM.html#lock"><code>lock</code></a> <a href="FSM.html#testLock"><code>testLock</code></a> <a href="FSM.html#isLocked"><code>isLocked</code></a></li>
        </ul>
    </dd>
    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The lock key.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p><code>true</code> if unlocking succeed, false otherwise.</p>
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="version"><span class="type-signature"></span>version<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Returns the version of this machine.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line411">line 411</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>string</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p>The version of machine as defined in configs instanciation.</p>
</div>

    
</div>



</div>
        
    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                
<div class="section-method">

    

    <h4 class="name" id="~listener"><span class="type-signature"></span>listener<span class="signature">(eventObj, argsâ€¦<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Machine and Configs Listeners are either the ones defined in the <a href="FSM.html"><code>FSM</code></a> <code>configs</code> parameter or registred with <a href="FSM.html#on"><code>FSM#on</code></a>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line626">line 626</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><code>documentation</code>.</li>
        
            <li><code>index</code>.</li>
        </ul>
    </dd>
    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>eventObj</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The event object.</p>
                
                    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>event</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The trigger event name. Note that exit/entry listeners do not get this property.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>step</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>A string among { &quot;before&quot; | &quot;guard&quot; | &quot;dont&quot; | &quot;do&quot; | &quot;after&quot; } for transitions, or { &quot;exit&quot; | &quot;entry&quot; } for exit/entry states.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>from</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The source state name of the transition.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>to</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The target state name of the external transition. This property does not exist for an internal transition or exit/entry state.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>Either the exit state name (<code>step === &quot;exit&quot;</code>) or the entry state name (<code>step === &quot;entry&quot;</code>).</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>An Array containing the options parameters as given on registering the machine listener either:</p>
<ul>
<li>with <a href="FSM.html#on"><code>fsm.on(eventPattern, [scope,] listener, options...)</code></a> or</li>
<li>in the <a href="FSM.html"><code>configs</code></a> definition of this transition (i.e. <code>configs.&quot;event&quot;[{from, ... , options}]</code> or <code>configs.&quot;event&quot;.options</code>).</li>
</ul>
                
            </td>
        </tr>

    
    </tbody>
</table>

                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>argsâ€¦</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>any</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>The arguments were passed by the <a href="FSM.html#trigger"><code>fsm.trigger(triggerEvent, argsâ€¦)</code></a>.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p>either of :</p>
<ul>
<li><code>true</code> then continue to next listener.</li>
<li><code>falsy</code> then the remaining listeners of the transition step (before, guard, do, dont, exit, enter or after) are skipped.</li>
<li><code>falsy</code> when the step is either of &quot;before&quot;, &quot;guard&quot; or &quot;exit&quot;, then the transition is aborted.</li>
</ul>
</div>

    
</div>



</div>
            
                
<div class="section-method">

    

    <h4 class="name" id="~onCreated"><span class="type-signature"></span>onCreated<span class="signature">(fsm)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>This callback is called after completed FSM instanciation.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line104">line 104</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fsm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="FSM.html">FSM</a></code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The FSM instance. Note that the <code>this</code> inside the function is also the FSM instance.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
            
                
<div class="section-members">
<h4 class="name" id="~Status">Status</h4>




<div class="description">
    <p>The status of this machine.</p>
</div>





    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>engine</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                

                
                </td>
            

            

            <td class="description last"><p>The engine version.</p></td>
        </tr>

        

    

        <tr>
            
                <td class="name"><code>namespace</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                </td>
            

            

            <td class="description last"><p>The namespace of this machine.</p></td>
        </tr>

        

    

        <tr>
            
                <td class="name"><code>pending</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            
                <td class="attributes">
                

                
                </td>
            

            

            <td class="description last"><p>If this machine transition is pending.</p></td>
        </tr>

        

    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                

                
                </td>
            

            

            <td class="description last"><p>The current state of this machine.</p></td>
        </tr>

        

    

        <tr>
            
                <td class="name"><code>version</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            
                <td class="attributes">
                

                
                </td>
            

            

            <td class="description last"><p>The configs version.</p></td>
        </tr>

        

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fsm.js.html">fsm.js</a>, <a href="fsm.js.html#line466">line 466</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>Object</code></span>


        </li>
    </ul>





</div>

            
    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Jun 20 2019 15:59:30 GMT+0200 (CEST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>